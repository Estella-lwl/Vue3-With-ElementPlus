"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[295],{6947:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(6252),o=a(3577),i=a(2262);const n={class:"form-container"},u={class:"search-title"};var r=(0,l.aZ)({__name:"form",props:{modelValue:{type:Object,required:!0},formItems:{type:Array,default:()=>[]},labelWidth:{type:String,default:"75px"},itemStyle:{type:Object,default:()=>({padding:"10px 0px"})},colLayout:{type:Object,default:()=>({xl:6,lg:8,md:12,sm:24,xs:24})}},emits:["resetForm","resetClick","update:modelValue"],setup(e,{emit:t}){const a=e,r=(0,i.iH)({...a.modelValue});return(0,l.YP)(r,(e=>{t("update:modelValue",e)}),{deep:!0}),(t,a)=>{const i=(0,l.up)("el-input"),d=(0,l.up)("el-option"),s=(0,l.up)("el-select"),p=(0,l.up)("el-date-picker"),c=(0,l.up)("el-form-item"),m=(0,l.up)("el-col"),f=(0,l.up)("el-row"),g=(0,l.up)("el-form");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",u,[(0,l.WI)(t.$slots,"header")]),(0,l.Wm)(g,{"label-width":e.labelWidth},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formItems,(t=>((0,l.wg)(),(0,l.j4)(m,(0,o.vs)((0,l.dG)({key:t.label},e.colLayout)),{default:(0,l.w5)((()=>[t.isHiddenItem?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(c,{key:0,class:"form-item",label:t.label,rules:t.rules,style:(0,o.j5)(e.itemStyle)},{default:(0,l.w5)((()=>["input"===t.type?((0,l.wg)(),(0,l.j4)(i,{key:0,placeholder:t.placeholder,modelValue:r.value[`${t.field}`],"onUpdate:modelValue":e=>r.value[`${t.field}`]=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])):"password"===t.type?((0,l.wg)(),(0,l.j4)(i,{key:1,"show-password":"",placeholder:t.placeholder,modelValue:r.value[`${t.field}`],"onUpdate:modelValue":e=>r.value[`${t.field}`]=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])):"select"===t.type?((0,l.wg)(),(0,l.j4)(s,{key:2,placeholder:t.placeholder,modelValue:r.value[`${t.field}`],"onUpdate:modelValue":e=>r.value[`${t.field}`]=e},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.options,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.value,value:e.value},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.title),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue"])):"datepicker"===t.type?((0,l.wg)(),(0,l.j4)(p,(0,l.dG)({key:3},t.otherOptions,{style:{width:"100%"},modelValue:r.value[`${t.field}`],"onUpdate:modelValue":e=>r.value[`${t.field}`]=e}),null,16,["modelValue","onUpdate:modelValue"])):(0,l.kq)("",!0)])),_:2},1032,["label","rules","style"]))])),_:2},1040)))),128)),(0,l._)("div",{style:(0,o.j5)(e.itemStyle),class:"form-btn"},[(0,l.WI)(t.$slots,"formBtn")],4)])),_:3})])),_:3},8,["label-width"])])}}}),d=a(3744);const s=(0,d.Z)(r,[["__scopeId","data-v-999def3e"]]);var p=s,c=p},9287:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(6252),o=a(2262),i=a(6947),n=a(9328);const u={class:"page-dialog"},r={class:"dialog-footer"};var d=(0,l.aZ)({__name:"page-dialog",props:{dialogTitle:{type:String,required:!0},pageName:{type:String,required:!0},dialogConfig:{type:Object,required:!0},initData:{type:Object,default:()=>({})},checkedData:{type:Object,default:()=>({})}},setup(e,{expose:t}){const a=e;let d=(0,o.iH)(!1),s=(0,o.iH)({});(0,l.YP)((()=>a.initData),(e=>{for(const t of a.dialogConfig.formItems)s.value[`${t.field}`]=e[`${t.field}`]}));const p=()=>{const e=a.pageName,t=a.initData.id;let l=(0,o.iH)();Object.keys(a.initData).length?l.value=(0,n.uz)(`/${e}/${t}`,{...s.value,...a.checkedData,id:a.initData.id}):l.value=(0,n.r4)(`/${e}`,{...s.value,...a.checkedData}),l.value&&(d.value=!1,(0,n.WJ)(`/${a.pageName}/list`,{offset:0,size:10}))};return t({dialogVisible:d,formData:s}),(t,a)=>{const n=(0,l.up)("el-button"),c=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(c,{title:e.dialogTitle,width:"30%",center:"",modelValue:(0,o.SU)(d),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.dq)(d)?d.value=e:d=e),"destroy-on-close":""},{footer:(0,l.w5)((()=>[(0,l._)("span",r,[(0,l.Wm)(n,{onClick:a[1]||(a[1]=e=>(0,o.dq)(d)?d.value=!1:d=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(n,{type:"primary",onClick:p},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确认 ")])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(i.Z),(0,l.dG)(e.dialogConfig,{modelValue:(0,o.SU)(s),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.dq)(s)?s.value=e:s=e)}),null,16,["modelValue"]),(0,l.WI)(t.$slots,"default")])),_:3},8,["title","modelValue"])])}}});const s=d;var p=s,c=p},3001:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(6252),o=a(2262),i=a(6947);const n={class:"page-search"},u=(0,l._)("p",null,"检索",-1),r={class:"search-btn"};var d=(0,l.aZ)({__name:"page-search",props:{formConfig:{type:Object,required:!0}},emits:["searchEvent","resetEvent"],setup(e,{emit:t}){const a=e,d={},s=a.formConfig.formItems??[];for(const l of s)d[l.field]="";const p=(0,o.iH)(d),c=()=>{for(const e in d)p.value[e]=d[e],t("resetEvent")},m=()=>{t("searchEvent",p.value)};return(t,a)=>{const d=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)((0,o.SU)(i.Z),(0,l.dG)(e.formConfig,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e)}),{header:(0,l.w5)((()=>[u])),formBtn:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(d,{type:"primary",onClick:c},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1}),(0,l.Wm)(d,{type:"primary",onClick:m},{default:(0,l.w5)((()=>[(0,l.Uk)("搜索")])),_:1})])])),_:1},16,["modelValue"])])}}});const s=d;var p=s,c=p},3454:function(e,t,a){a.d(t,{Z:function(){return C}});var l=a(6252),o=a(2262),i=a(3577);const n={class:"table-container"},u={class:"table-header"},r={class:"table-header-title"},d={class:"table-header-right"},s={key:0,class:"table-footer"};var p=(0,l.aZ)({__name:"table",props:{title:{type:String,require:!0},tableData:{type:Array,require:!0},propList:{type:Array,require:!0},isShowIdxCol:{type:Boolean,default:!0},isShowSelectCol:{type:Boolean,default:!1},dataCount:{type:Number,default:0},page:{type:Object,default:()=>({curPage:0,pageSize:10})},isShowFooter:{type:Boolean,default:!0},childrenProps:{type:Object,default:()=>({})}},emits:["selectionChange","update:page"],setup(e,{emit:t}){const a=e,p=(0,o.iH)(!1),c=(0,o.iH)(!1),m=(0,o.iH)(!1),f=e=>{t("selectionChange",e)},g=e=>{t("update:page",{...a.page,curPage:e})},v=e=>{t("update:page",{...a.page,pageSize:e})};return(t,a)=>{const o=(0,l.up)("el-table-column"),w=(0,l.up)("el-table"),y=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",u,[(0,l._)("div",r,[(0,l.WI)(t.$slots,"header-title",{},(()=>[(0,l.Uk)((0,i.zw)(e.title),1)]))]),(0,l._)("div",d,[(0,l.WI)(t.$slots,"header-btn")])]),(0,l.Wm)(w,(0,l.dG)({data:e.tableData,stripe:"",class:"table-main",onSelectionChange:f},e.childrenProps),{default:(0,l.w5)((()=>[e.isShowSelectCol?((0,l.wg)(),(0,l.j4)(o,{key:0,type:"selection",align:"center",width:"28"})):(0,l.kq)("",!0),e.isShowIdxCol?((0,l.wg)(),(0,l.j4)(o,{key:1,type:"index",label:"序号",align:"center",width:"70"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.propList,(e=>((0,l.wg)(),(0,l.j4)(o,(0,l.dG)({key:e.prop},e,{align:"center","show-overflow-tooltip":""}),{default:(0,l.w5)((a=>[(0,l.WI)(t.$slots,e.slotName,{row:a.row},(()=>[(0,l.Uk)((0,i.zw)(a.row[e.prop]),1)]))])),_:2},1040)))),128))])),_:3},16,["data"]),e.isShowFooter?((0,l.wg)(),(0,l.iD)("div",s,[(0,l.WI)(t.$slots,"table-footer",{},(()=>[(0,l.Wm)(y,{small:p.value,disabled:m.value,background:c.value,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30],"page-size":e.page.pageSize,"current-page":e.page.curPage,total:e.dataCount,onSizeChange:v,onCurrentChange:g},null,8,["small","disabled","background","page-size","current-page","total"])]))])):(0,l.kq)("",!0)])}}}),c=a(3744);const m=(0,c.Z)(p,[["__scopeId","data-v-d5adba88"]]);var f=m,g=f,v=a(840);function w(e,t){const a=(0,v.oR)(),l=a.state.login.permission,o=`system:${e}:${t}`;return!!l.find((e=>e===o))}var y=a(9328);const b={class:"table-content"};var h=(0,l.aZ)({__name:"page-content",props:{pageName:{type:String,require:!0},contentTableConfig:{type:Object,require:!0}},emits:["addAction","editAction"],setup(e,{expose:t,emit:a}){const n=e,u=w(n.pageName,"create"),r=w(n.pageName,"delete"),d=w(n.pageName,"update");let s=(0,o.iH)();const p=(0,o.iH)({curPage:1,pageSize:10});(0,l.YP)(p,(()=>f()));let c=(0,o.iH)(s.value?.list),m=(0,o.iH)(s.value?.totalCounts);const f=async(e={})=>{const t={offset:(p.value.curPage-1)*p.value.pageSize,size:p.value.pageSize,...e},a=`/${n.pageName}/list`,l=await(0,y.WJ)(a,t);c=l.data.list,m=l.data.totalCount,s.value=c};f();const v=n.contentTableConfig?.propList.filter((e=>"createAt"!==e.slotName&&("updateAt"!==e.slotName&&"edit"!==e.slotName))),h=()=>{a("addAction")},k=e=>{a("editAction",e)},_=async(e={})=>{const{id:t}=e,a=`/${n.pageName}/${t}`;await(0,y.H9)(a),f({offset:0,size:10})};return t({getData:f}),(t,a)=>{const n=(0,l.up)("el-button"),c=(0,l.up)("RefreshRight"),f=(0,l.up)("el-icon"),w=(0,l.up)("Edit"),y=(0,l.up)("Delete");return(0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)((0,o.SU)(g),(0,l.dG)({tableData:(0,o.SU)(s),dataCount:(0,o.SU)(m),page:p.value,"onUpdate:page":a[0]||(a[0]=e=>p.value=e)},e.contentTableConfig),(0,l.Nv)({"header-btn":(0,l.w5)((()=>[(0,o.SU)(u)?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"primary",size:"small",onClick:h},{default:(0,l.w5)((()=>[(0,l.Uk)("新增")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(n,{plain:"",size:"small"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{color:"#409EFC"},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})])),_:1})])),createAt:(0,l.w5)((e=>[(0,l._)("span",null,(0,i.zw)(t.$filters.timeFormat(e.row.createAt)),1)])),updateAt:(0,l.w5)((e=>[(0,l._)("span",null,(0,i.zw)(t.$filters.timeFormat(e.row.updateAt)),1)])),edit:(0,l.w5)((e=>[(0,o.SU)(d)?((0,l.wg)(),(0,l.j4)(n,{key:0,plain:"",size:"small",type:"primary",onClick:t=>k(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w)])),_:1}),(0,l.Uk)("  编辑 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,o.SU)(r)?((0,l.wg)(),(0,l.j4)(n,{key:1,plain:"",size:"small",type:"danger",onClick:t=>_(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y)])),_:1}),(0,l.Uk)("  删除 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:2},[(0,l.Ko)((0,o.SU)(v),(e=>({name:e.slotName,fn:(0,l.w5)((a=>[e.slotName?(0,l.WI)(t.$slots,e.slotName,{key:0,row:a.row}):(0,l.kq)("",!0)]))})))]),1040,["tableData","dataCount","page"])])}}});const k=(0,c.Z)(h,[["__scopeId","data-v-033db277"]]);var _=k,C=_},2351:function(e,t,a){a.d(t,{L:function(){return o}});var l=a(2262);function o(e,t){const a=(0,l.iH)(),o=(0,l.iH)({}),i=()=>{a.value&&(o.value={},a.value.dialogVisible=!0,e&&e())},n=e=>{a.value&&(o.value=e,a.value.dialogVisible=!0,t&&t(e))};return[a,o,i,n]}},3671:function(e,t,a){a.d(t,{Y:function(){return o}});var l=a(2262);function o(){const e=(0,l.iH)(),t=t=>{e.value?.getData(t)},a=()=>{e.value?.getData()};return[e,t,a]}},3744:function(e,t){t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a}}}]);
//# sourceMappingURL=295.a1eefc49.js.map