"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[885],{3454:function(e,t,a){a.d(t,{Z:function(){return S}});var l=a(6252),o=a(2262),i=a(3577);const n={class:"table-container"},s={class:"table-header"},r={class:"table-header-title"},p={class:"table-header-right"},u={key:0,class:"table-footer"};var d=(0,l.aZ)({__name:"table",props:{title:{type:String,require:!0},tableData:{type:Array,require:!0},propList:{type:Array,require:!0},isShowIdxCol:{type:Boolean,default:!0},isShowSelectCol:{type:Boolean,default:!1},dataCount:{type:Number,default:0},page:{type:Object,default:()=>({curPage:0,pageSize:10})},isShowFooter:{type:Boolean,default:!0},childrenProps:{type:Object,default:()=>({})}},emits:["selectionChange","update:page"],setup(e,{emit:t}){const a=e,d=(0,o.iH)(!1),c=(0,o.iH)(!1),g=(0,o.iH)(!1),m=e=>{t("selectionChange",e)},w=e=>{t("update:page",{...a.page,curPage:e})},f=e=>{t("update:page",{...a.page,pageSize:e})};return(t,a)=>{const o=(0,l.up)("el-table-column"),b=(0,l.up)("el-table"),h=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",s,[(0,l._)("div",r,[(0,l.WI)(t.$slots,"header-title",{},(()=>[(0,l.Uk)((0,i.zw)(e.title),1)]))]),(0,l._)("div",p,[(0,l.WI)(t.$slots,"header-btn")])]),(0,l.Wm)(b,(0,l.dG)({data:e.tableData,stripe:"",class:"table-main",onSelectionChange:m},e.childrenProps),{default:(0,l.w5)((()=>[e.isShowSelectCol?((0,l.wg)(),(0,l.j4)(o,{key:0,type:"selection",align:"center",width:"28"})):(0,l.kq)("",!0),e.isShowIdxCol?((0,l.wg)(),(0,l.j4)(o,{key:1,type:"index",label:"序号",align:"center",width:"70"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.propList,(e=>((0,l.wg)(),(0,l.j4)(o,(0,l.dG)({key:e.prop},e,{align:"center","show-overflow-tooltip":""}),{default:(0,l.w5)((a=>[(0,l.WI)(t.$slots,e.slotName,{row:a.row},(()=>[(0,l.Uk)((0,i.zw)(a.row[e.prop]),1)]))])),_:2},1040)))),128))])),_:3},16,["data"]),e.isShowFooter?((0,l.wg)(),(0,l.iD)("div",u,[(0,l.WI)(t.$slots,"table-footer",{},(()=>[(0,l.Wm)(h,{small:d.value,disabled:g.value,background:c.value,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30],"page-size":e.page.pageSize,"current-page":e.page.curPage,total:e.dataCount,onSizeChange:f,onCurrentChange:w},null,8,["small","disabled","background","page-size","current-page","total"])]))])):(0,l.kq)("",!0)])}}}),c=a(3744);const g=(0,c.Z)(d,[["__scopeId","data-v-d5adba88"]]);var m=g,w=m,f=a(840);function b(e,t){const a=(0,f.oR)(),l=a.state.login.permission,o=`system:${e}:${t}`;return!!l.find((e=>e===o))}var h=a(9328);const v={class:"table-content"};var y=(0,l.aZ)({__name:"page-content",props:{pageName:{type:String,require:!0},contentTableConfig:{type:Object,require:!0}},emits:["addAction","editAction"],setup(e,{expose:t,emit:a}){const n=e,s=b(n.pageName,"create"),r=b(n.pageName,"delete"),p=b(n.pageName,"update");let u=(0,o.iH)();const d=(0,o.iH)({curPage:1,pageSize:10});(0,l.YP)(d,(()=>m()));let c=(0,o.iH)(u.value?.list),g=(0,o.iH)(u.value?.totalCounts);const m=async(e={})=>{const t={offset:(d.value.curPage-1)*d.value.pageSize,size:d.value.pageSize,...e},a=`/${n.pageName}/list`,l=await(0,h.WJ)(a,t);c=l.data.list,g=l.data.totalCount,u.value=c};m();const f=n.contentTableConfig?.propList.filter((e=>"createAt"!==e.slotName&&("updateAt"!==e.slotName&&"edit"!==e.slotName))),y=()=>{a("addAction")},k=e=>{a("editAction",e)},C=async(e={})=>{const{id:t}=e,a=`/${n.pageName}/${t}`;await(0,h.H9)(a),m({offset:0,size:10})};return t({getData:m}),(t,a)=>{const n=(0,l.up)("el-button"),c=(0,l.up)("RefreshRight"),m=(0,l.up)("el-icon"),b=(0,l.up)("Edit"),h=(0,l.up)("Delete");return(0,l.wg)(),(0,l.iD)("div",v,[(0,l.Wm)((0,o.SU)(w),(0,l.dG)({tableData:(0,o.SU)(u),dataCount:(0,o.SU)(g),page:d.value,"onUpdate:page":a[0]||(a[0]=e=>d.value=e)},e.contentTableConfig),(0,l.Nv)({"header-btn":(0,l.w5)((()=>[(0,o.SU)(s)?((0,l.wg)(),(0,l.j4)(n,{key:0,type:"primary",size:"small",onClick:y},{default:(0,l.w5)((()=>[(0,l.Uk)("新增")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(n,{plain:"",size:"small"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"#409EFC"},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})])),_:1})])),createAt:(0,l.w5)((e=>[(0,l._)("span",null,(0,i.zw)(t.$filters.timeFormat(e.row.createAt)),1)])),updateAt:(0,l.w5)((e=>[(0,l._)("span",null,(0,i.zw)(t.$filters.timeFormat(e.row.updateAt)),1)])),edit:(0,l.w5)((e=>[(0,o.SU)(p)?((0,l.wg)(),(0,l.j4)(n,{key:0,plain:"",size:"small",type:"primary",onClick:t=>k(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1}),(0,l.Uk)("  编辑 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,o.SU)(r)?((0,l.wg)(),(0,l.j4)(n,{key:1,plain:"",size:"small",type:"danger",onClick:t=>C(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h)])),_:1}),(0,l.Uk)("  删除 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:2},[(0,l.Ko)((0,o.SU)(f),(e=>({name:e.slotName,fn:(0,l.w5)((a=>[e.slotName?(0,l.WI)(t.$slots,e.slotName,{key:0,row:a.row}):(0,l.kq)("",!0)]))})))]),1040,["tableData","dataCount","page"])])}}});const k=(0,c.Z)(y,[["__scopeId","data-v-033db277"]]);var C=k,S=C},3744:function(e,t){t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a}},8885:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=a(6252),o=a(2262),i=a(3577),n=a(3454);const s={title:"商品列表",propList:[{prop:"name",label:"商品名称",minWidth:"200"},{prop:"oldPrice",label:"原价格",minWidth:"80"},{prop:"newPrice",label:"现价格",minWidth:"80"},{prop:"imgUrl",label:"商品图片",minWidth:"100",slotName:"image"},{prop:"status",label:"状态",minWidth:"100",slotName:"status"},{prop:"createAt",label:"创建时间",minWidth:"180",slotName:"createAt"},{prop:"updateAt",label:"更新时间",minWidth:"180",slotName:"updateAt"},{label:"操作",minWidth:"200",slotName:"edit"}],isShowIdxCol:!0,isShowSelectCol:!0},r={class:"goods"};var p=(0,l.aZ)({__name:"goods",setup(e){return(e,t)=>{const a=(0,l.up)("el-image"),p=(0,l.up)("el-tag");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)((0,o.SU)(n.Z),{ref:"pageContentRef","content-table-config":(0,o.SU)(s),pageName:"goods"},{image:(0,l.w5)((e=>[(0,l.Wm)(a,{style:{width:"60px",height:"60px"},src:e.row.imgUrl,"preview-src-list":[e.row.imgUrl]},null,8,["src","preview-src-list"])])),status:(0,l.w5)((e=>[(0,l.Wm)(p,{type:e.row.status?"success":"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.row.enable?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1},8,["content-table-config"])])}}});const u=p;var d=u}}]);
//# sourceMappingURL=885.4a041290.js.map